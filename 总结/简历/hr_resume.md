### 项目经验
2024-03 ~ 至今
#### CoreHR 核心人事系统
后端开发
项目介绍：CoreHR 核心人事系统是一个服务于大型企业的综合性人力资源管理平台。系统涵盖组织管理、人员管理、考勤管理、薪酬福利等全链路HR业务，通过数字化和智能化手段提升HR运营效率，为企业人力资源决策提供数据支撑。
技术栈：SpringBoot + MyBatis + MySQL + Redis + RocketMQ
工作描述:
1、负责 HR 核心人事系统入职、离职全流程的业务优化与功能迭代，搭建实习生培养全周期数字化流程体系。
2、设计并开发 HR 数据看板，实现核心人事数据的可视化展示与实时监控，为 HR 运营决策提供数据支撑。
3、落地系统灰度发布能力，支撑功能平稳上线。
技术要点:
・**入职流程数字化**：定义核心状态节点实现入职流程的标准化管控，通过OCR识别服务完成对身份证、银行卡等证件的智能识别；设计批量操作的维度一致性校验算法，并采用Redisson分布式锁防止并发操作冲突。

・**数据看板分析平台**：设计并实现了基于策略模式+工厂模式的本周关注模块，支持多种业务场景的统一数据处理。实现多层级组织架构的递归数据处理。

・**数据导出引擎**：开发了异步分批次导出引擎，支持百万级大数据量分页查询，避免内存溢出，自动分Sheet处理超大文件。同时优化Excel导入模板架构，将sheet页静态数据转换为动态下拉框组件，提升数据导入准确性和用户操作体验。

・**HR员服智能助手**：基于 Dify 平台构建 AI 智能体，全面覆盖补签、加班、请假、薪资咨询、制度查询等 17 类 HR 业务场景，精准识别用户意图，支持多轮对话流畅处理复杂需求，将 HR 业务处理效率整体提升约 60%，显著降低人力成本。

・**系统性能优化**：针对团队异动明细、FAQ 答案详情等核心查询场景开展深度性能优化，通过重构索引、优化 SQL 写法、调整查询策略等手段，将核心慢查询性能提升 10 倍以上，FAQ 接口响应耗时从 1100ms + 降至 250ms 内，大幅提升业务查询效率。


### 总结
1. 服务A需要调用服务B
   ↓
2. 服务A通过Feign客户端发起调用
   ↓
3. FeignRequestInterceptor拦截请求
   ↓
4. 添加签名头信息（x-core-sign等）
   ↓
5. 发送请求到服务B
   ↓
6. 服务B的OpenApiSignFilter验证签名
   ↓
7. 处理业务逻辑
   ↓
8. 返回响应给服务A

### 介绍
面试官您好，我是XX，2019年硕士毕业于XX大学电子信息工程专业。在专业技能上，我对JVM、并发编程、数据库原理等方面有比较深入的积累。此前我就职于XX公司，担任软件开发工程师，主要负责电商活动系统的研发与优化，在服务性能提升和高可用架构设计上有过不少实践，也对这类业务的研发流程很熟悉。因此我希望能加入贵公司的研发团队，贡献自己的经验。谢谢。


面试官您好，我是项文杰，毕业于江西农业大学的软件工程专业。在专业技能上，深入掌握JVM、高并发编程、数据库原理等核心知识。上一份工作任职于广东叶子科技有限公司，担任Java 后端开发工程师，主要负责HR核心人事系统的研发与优化，参与了入职、离职全流程的业务优化与功能迭代；独立设计并落地HR 数据看板模块，实现人事数据可视化与多维度分析；负责搭建AI智能助手，并针对系统核心查询接口做专项性能优化，有效降低响应耗时、提升了系统并发承载能力。我的自我介绍结束，谢谢。

### 回答

面试官您好，我是项文杰，是一名拥有2年Java后端开发经验的程序员，之前在HR产品组参与了CoreHR核心人事系统的开发。

我先简单介绍一下我的技术栈：主要使用Spring Boot、Spring Cloud、MyBatis、MySQL、Redis、RocketMQ等技术，参与的是一个微服务架构的企业内部管理系统，面向HR和管理者，涵盖人事、组织、薪酬、考勤等全链路HR业务模块。系统由多个服务组成，包括提供基础能力的basic服务、公共能力的common服务，以及工作流审批相关的workflow服务和入职合同相关的pers服务。

在项目中，我主要负责了几个核心模块的开发和优化：

首先是**HR员服智能助手**，这是我主导构建的基于Dify平台的AI智能体系统，全面覆盖了补签、加班、请假、薪资咨询、制度查询等17类HR业务场景。通过意图识别算法和多轮对话机制，系统能准确理解用户需求，还集成了知识库和智能卡片交互，将HR业务处理效率提升了约60%，显著降低了人力成本。

其次是**系统性能优化**，我针对团队异动明细、FAQ答案详情等核心查询场景进行了深度优化，通过重构索引、优化SQL写法、调整查询策略、引入并行调用和缓存预热等手段，将核心慢查询性能提升了10倍以上，比如FAQ接口响应耗时从1100ms+降至250ms内，大幅提升了业务查询效率。

另外，我还负责了**数据导出引擎**的开发，实现了异步分批次导出功能，支持百万级大数据量分页查询，避免内存溢出，自动分Sheet处理超大文件，同时优化了Excel导入模板架构，提升了数据导入准确性和用户体验。

在**数据看板分析平台**的设计中，我采用了策略模式+工厂模式的组合，实现了基于多种业务场景的统一数据处理，支持多层级组织架构的递归数据处理，通过这种设计，新增业务类型只需要添加枚举值和策略实现类，系统会自动发现和注册，扩展性和可维护性都很好。

最后，在**入职流程数字化**方面，我定义了10个核心状态节点实现标准化管控，通过维度一致性校验算法和Redisson分布式锁防止并发操作冲突，将入职办理时效从原来的约5天压缩到1.5天左右，支持了多国家、多业务单元的差异化规则。

整体而言，我在项目中不仅完成了功能开发，更注重系统性能、用户体验和代码质量，通过技术手段解决了实际业务问题，为项目的成功上线和稳定运行做出了贡献。我期待能将这些经验和技能应用到新的团队中，继续成长和创造价值。


7.82 + 

### 回答


**面试时如何介绍「HR员服智能助手」：**

> 我主导构建了基于Dify平台的HR员服智能助手，这是一个全面覆盖HR业务场景的AI智能体系统。
>
> **第一块是业务场景覆盖。** 我们构建了17类HR业务场景的完整意图分类体系，包括补签、加班、请假、薪资咨询、制度查询、入职办理、离职手续等。通过意图识别算法，系统能准确理解用户的自然语言输入，比如用户说"我要补签2024年3月4日18:30，忘记打卡"，系统会自动识别为补签场景并提取关键信息。
>
> **第二块是多轮对话与上下文感知。** 我设计了上下文感知的意图分类器，能处理复杂的多轮对话。比如用户先问"年假有多少天？"，然后说"那我还能休几天？"，系统会理解"那"指的是年假，并结合上下文给出个人剩余年假信息。我们通过对话记忆机制保存最近3轮对话内容，支持指代解析和意图继承。
>
> **第三块是智能参数提取。** 我开发了基于Pipeline的信息提取流程，能从用户的非结构化文本中准确提取业务参数。比如补签助手，用户说"我要补签昨天下午6点半在深圳"，系统会自动提取补签时间、补签城市、补签原因等结构化数据，并生成标准的JSON格式。
>
> **第四块是业务系统集成。** 我们通过JavaScript代码执行模块，实现了与GHR、PS等业务系统的深度集成。用户确认信息后，系统会自动生成带参数的跳转链接，直接跳转到对应的业务系统页面，实现一键申请。比如请假助手会生成包含请假类型、开始时间、结束时间等参数的URL，用户点击就能直接进入请假申请页面。
>
> **第五块是智能卡片交互。** 我设计了基于Adaptive Cards的交互界面，用户提交信息后，系统会生成结构化的卡片展示，包含所有提取的关键信息，用户可以直观地确认后再提交。这种交互方式比传统的文本对话更直观，减少了用户的认知负担。
>
> **第六块是知识库集成。** 我们集成了公司的HR制度文档作为知识库，支持政策咨询和规则查询。用户问"病假工资怎么算？"，系统会从知识库中检索相关文档，并给出准确的政策解读，还会提供文档链接供用户进一步查阅。
>
> **第七块是错误处理与追问机制。** 我设计了完善的错误处理流程，当用户提供的信息不完整时，系统会智能追问。比如请假时没说具体时间，系统会问"请告诉我你的请假时间是哪一天？"，确保信息的完整性。
>
> 整体上，这个智能助手将HR业务处理效率提升了约60%，用户可以通过自然语言快速完成各种HR操作，大大降低了人力成本和操作复杂度。我们还建立了用户反馈机制，持续优化AI的理解能力和业务覆盖度。

**面试时如何介绍「系统性能优化」：**

> 我负责了几个核心接口的深度性能优化，主要是团队异动明细和FAQ答案详情这两个高频查询场景。
>
> **第一个是团队异动明细接口优化（/api/v2/workflow/queryMyTeamChangCount）。** 这个接口原来响应时间在2-3秒左右，主要有几个问题：
> 1. **串行调用优化**：原来`getTransferList`方法串行调用了3次，每次都是慢SQL，我把它们合并成一次调用，减少数据库交互次数。
> 2. **SQL语句优化**：主要是把OR条件拆成UNION ALL。比如原来的`(business_unit_from = 'OPP10' OR business_unit_to = 'OPP10')`会导致优化器难以选择索引，我拆成两段：`business_unit_from = 'OPP10' UNION ALL business_unit_to = 'OPP10'`，这样每段都能走对应的索引。
> 3. **去除函数操作**：把日期字段上的函数操作去掉，比如`DATE(create_time) = '2024-01-01'`改成`create_time >= '2024-01-01 00:00:00' AND create_time < '2024-01-02 00:00:00'`，这样能走索引。
> 4. **子查询改JOIN**：把一些子查询改成JOIN查询，减少嵌套查询的复杂度。
> 5. **并行调用**：把PS接口调用和优化后的`getTransferList`改成并行执行，用`CompletableFuture`同时发起请求。
>
> **第二个是FAQ相关接口优化。** 
> - **FAQ热门问题接口（/api/v2/faq/question/hot）**：这个接口原来要调用两次机器人SDK，每次都250ms+，我把串行调用改成并行调用，用`CompletableFuture.allOf()`同时发起两个请求，响应时间从500ms+降到250ms左右。
> - **FAQ答案详情接口（/api/v2/faq/question/answer）**：这个接口也是调用机器人SDK比较慢，我们采用了定时预热缓存的方案，把常用的FAQ答案提前缓存到Redis，命中缓存的话响应时间从400ms+降到几十毫秒。
>
> **第三个是省市列表接口优化（/api/v2/province-city/list）。** 主要问题是SQL用了全模糊匹配`LIKE '%关键词%'`不走索引。我的优化方案是：
> 1. **判断完整工号**：如果用户输入的是完整工号格式，直接用等值查询`=`而不是`LIKE`。
> 2. **改用右模糊查询**：把`LIKE '%关键词%'`改成`LIKE '关键词%'`，这样能走前缀索引。
> 3. **去掉不必要的分页**：发现前端其实不需要分页，直接返回列表，避免了count查询的开销。
>
> **第四个是通用的优化策略：**
> 1. **索引优化**：根据查询条件新增或重构索引，特别是复合索引的字段顺序。
> 2. **查询字段优化**：count查询时不查询多余字段，只查必要的字段减少数据传输。
> 3. **分页优化**：去掉不必要的分页操作，避免count和page分别执行。
>
> 最终效果是团队异动接口性能提升了10倍以上，FAQ接口从1100ms+降到250ms内，用户体验明显改善。这些优化主要是通过SQL改写、索引调整、并行调用、缓存预热等手段实现的。


**面试时如何介绍「数据导出引擎」：**

> 我负责开发了一个异步分批次Excel导出引擎，主要解决大数据量导出时的性能和内存问题。
>
> **第一块是异步解耦设计。** 使用`CompletableFuture.runAsync()`实现异步处理，用户发起导出请求后不需要阻塞等待，可以在「导出中心」查看进度和下载结果。这样避免了大数据量导出时前端超时的问题。
>
> **第二块是分批次处理算法。** 我设计了一个分页查询的机制，默认每页500条记录，通过`ExportPageHandler`函数式接口让调用方提供具体的分页查询逻辑。核心算法是用`do-while`循环不断分页查询数据，每次查询完就用EasyExcel流式写入，避免一次性加载所有数据到内存导致OOM。
>
> **第三块是自动分Sheet处理。** 单个Sheet最大支持100万行数据，当数据量超过这个限制时，会自动创建新的Sheet页，命名规则是"原Sheet名-2"、"原Sheet名-3"这样递增。通过`sheetTotal`变量累计当前Sheet的数据量，超过阈值就重新创建WriteSheet对象。
>
> **第四块是线程池配置优化。** 我们配置了专门的线程池来处理异步导出任务，核心线程数是CPU核心数+1，最大线程数是CPU核心数×2，队列容量200。还支持多种拒绝策略，默认用`CallerRunsPolicy`，就是线程池满了的话由调用线程直接执行，保证任务不丢失。
>
> **第五块是Excel导入模板优化。** 我把原来的静态下拉框改成了动态加载，通过集成数据库查询和字典服务，实现下拉选项的实时动态加载。比如部门选择框，会根据用户权限动态加载可选的部门列表，提升数据导入的准确性。
>
> **第六块是完善的异常处理。** 导出过程中如果某个分页查询失败，不会影响整个导出流程，会记录错误信息并继续处理下一页。最终会在导出中心更新任务状态，成功的话提供文件下载链接，失败的话显示具体错误信息。
>
> 整体上，这个导出引擎支持百万级数据量的导出，内存占用稳定，用户体验也很好。我们还用了注解驱动的方式，通过`@ExcelModel`和`@ExcelColumn`来配置导出格式，支持中英文双语，扩展性很强。

**面试时如何介绍「数据看板分析平台」：**

> 我负责设计和实现了一个HR本周关注数据分析平台，主要用**策略模式+工厂模式**的组合来处理多种业务场景的统一数据处理。
>
> **第一块是业务场景的抽象。** 我们有10种不同的HR业务类型，比如考勤异常、延长工时、员工生日、入职周年、离职调动等。每种业务的数据来源、处理逻辑、展示格式都不一样，如果用传统的if-else会非常复杂。所以我设计了一个统一的策略接口`OrgWeeklyFocusGenerateService`，定义了`initOrgWeeklyFocusData`（数据初始化）、`viewGenerate`（页面展示）、`getMailContent`（邮件内容）等标准方法，每种业务类型都实现这个接口。
>
> **第二块是策略模式的实现。** 比如延长工时策略，会遍历组织架构，调用外部GSM API获取加班数据，然后按部门和个人两个维度处理；生日提醒策略，会调用员工RPC接口获取生日数据，生成类似"张三、李四等3人本周生日"这样的内容。每个策略通过`getType()`方法返回对应的业务类型枚举，作为工厂模式选择的依据。
>
> **第三块是工厂模式的应用。** 我们巧妙地利用Spring容器作为工厂，所有策略实现类都用`@Service`注解自动注册。系统根据业务类型枚举，通过`SpringContextHolder.getApplicationContext().getBean()`动态获取对应的策略实例，不需要写复杂的工厂类。
>
> **第四块是多层级组织架构的递归处理。** 我们需要处理50、60、70三个层级的部门数据，通过递归遍历组织架构，对每个部门调用外部接口获取数据。同时做了容错机制，单个部门接口失败不会影响整体流程，用`continue`跳过继续处理下一个。
>
> 整体上，通过这种设计模式组合，新增业务类型只需要添加枚举值和策略实现类，系统会自动发现和注册，不需要修改现有代码。目前支持10种业务场景，扩展性和可维护性都很好。


**面试时如何介绍「入职流程数字化转型」：**

> 我在 CoreHR 里主要负责入职模块的流程优化和功能迭代，核心是把线下入职流程做成可管控的数字化流程。
>
> **第一块是状态标准化。** 我们定义了 10 个核心状态节点，用枚举 `EntryStateEnum` 管理从候选人到正式入职的全链路，比如：待补充、待面试、待体检、待审核、待签署合同、待分配部门、待入职、已入职、已放弃、待转正。每个状态有明确的业务含义，状态之间的流转通过「状态转换映射表」做合法性校验，避免乱跳状态，实现**标准化管控**。
>
> **第二块是状态流转和外部系统打通。** 比如候选人信息补全后自动从「待补充」到「待面试」；HR 审核通过后进入「待签署合同」，并自动触达 e 签宝做实名认证、合同生成和签署；e 签宝回调签署完成后，状态更新为「待分配部门」，并异步下载签署文件；HR 做完部门岗位分配后，状态变为「已入职」，再通过事务同步器在事务提交后异步把数据回写到 PS 系统，不阻塞主流程。
>
> **第三块是批量操作和并发控制。** 批量分配部门时，我们做了「维度一致性校验」：用 HashSet 对员工类型、工作国家、工作城市、招聘地点、入职日期、岗位、服务类型等 7 个维度做一次遍历、去重，只有同一批人在这些维度上都一致才允许批量操作，时间复杂度是 O(n)。同时用 Redisson 分布式锁防止同一批人并发分配导致的冲突。
>
> **第四块是错误标记和异常恢复。** HR 可以按模块、字段标记错误，候选人修改后会自动取消对应错误标记。另外有定时任务检测「签署完成但状态未更新」「已分配但 PS 未同步」等不一致，并自动或人工修复，保证状态与外部系统一致。
>
> 整体上，通过状态机 + 枚举 + 校验 + 异步回写，把入职从线下散点操作变成可追踪、可管控的数字化流程，入职办理时效从原来的约 5 天压到 1.5 天左右，也支持了多国家、多业务单元的差异化规则。

（若面试官追问「状态机具体怎么实现」「e 签宝回调如何防重复」「维度校验为什么用 HashSet」等，可结合《入职状态信息文档》里的代码和流程图展开 1～2 句即可。）





### 暂存
・**智能通知与助理系统**：开发了周年庆通知自动化系统和高管助理功能模块。通过定时任务引擎实现员工周年庆的精准推送，设计了基于角色权限的高管助理工作流，提升了HR服务的自动化水平和用户体验。

・**人事数据提取与灰度发布**：构建了人事数据提取服务，支持多种数据格式的导出和API接口调用。同时负责系统灰度能力的技术实现，通过配置化的灰度策略，确保新功能的平滑上线和风险控制。

・**HR员服智能助手**：主导构建了基于 Dify 的 AI 智能体核心，集成了补签、加班、请假等AI驱动的智能工具，通过分步式任务处理框架，构建了补签助手和加班助手两大AI驱动的智能工具。
  - **员服AI 补签助手**：基于自然语言处理和意图识别技术，实现了智能考勤异常处理。支持员工通过自然语言描述补签需求（如"我要补签2024年3月4日18:30，忘记打卡"），自动识别考勤异常类型，提供补签申请流程指导。集成GHR系统API，实现补签申请的自动化提交，提升了考勤管理的智能化水平。
  - **员服AI 加班助手**：面向员工的智能加班申请工具，支持复杂加班场景的自然语言理解。员工可通过对话方式描述加班需求（如"我要申请周六晚上加班，19:00-23:00"或"申请8月17日加班13点到18点半；工作未完成"），系统自动解析日期时间和工作内容，生成规范的加班申请单，显著提升了加班申请的便捷性和准确性。


・**HR员服智能助手**：主导构建了基于 Dify 的 AI 智能体核心架构，构建了补签助手和加班助手两大AI驱动的智能工具。
  - **员服AI 补签助手**：基于自然语言处理和意图识别技术，实现了智能考勤异常处理。支持员工通过自然语言描述补签需求（如"我要补签2024年3月4日18:30，忘记打卡"），自动识别考勤异常类型，提供补签申请流程指导。集成GHR系统API，实现补签申请的自动化提交，提升了考勤管理的智能化水平。
  - **员服AI 加班助手**：面向员工的智能加班申请工具，支持复杂加班场景的自然语言理解。员工可通过对话方式描述加班需求（如"我要申请周六晚上加班，19:00-23:00"或"申请8月17日加班13点到18点半；工作未完成"），系统自动解析日期时间和工作内容，生成规范的加班申请单，显著提升了加班申请的便捷性和准确性。

・**AI应用开发与智能助手**：主导开发了AISphere应用平台，集成了补签助手和加班助手等AI驱动的智能工具。通过自然语言处理技术，实现了考勤异常的智能识别和处理建议，将人工处理效率提升约60%。


・**异步分批次导出引擎**：主导开发了异步多线程Excel导出引擎，使用CompletableFuture和ThreadPoolTaskExecutor实现非阻塞导出，支持百万级大数据量分页查询，避免内存溢出，自动分Sheet处理超大文件。

・**动态导入模板引擎**：优化Excel导入模板架构，将sheet页静态数据转换为动态下拉框组件，通过集成数据库查询和字典服务实现数据的实时动态加载，提升数据导入准确性和用户操作体验。

・**入离职流程数字化转型**：负责入职/离职模块的业务流程优化与功能迭代，构建全流程数字化解决方案。实现员工信息自动校验机制，通过集成第三方数据源实时验证身份信息和学历资质；设计审批流程节点化配置引擎，支持自定义流程模板和条件分支路由；构建离职资产交接线上化闭环系统，涵盖IT设备、办公用品、项目文档等资产的全生命周期管理。彻底解决传统线下流程效率低下、数据易遗漏的痛点，将入职办理时效压缩至1个工作日，离职流程合规率达到100%。

・入职流程数字化转型：负责入职模块的业务流程优化与功能迭代，构建全流程数字化解决方案。实现员工信息自动校验机制，通过集成第三方数据源实时验证身份信息和学历资质；设计审批流程节点化配置引擎，支持自定义流程模板和条件分支路由；彻底解决传统线下流程效率低下、数据易遗漏的痛点。


针对团队异动明细、FAQ 答案详情等核心查询场景开展深度性能优化，通过重构索引、优化 SQL 写法（拆解 OR 条件为 UNION ALL、消除日期函数、子查询改 JOIN、模糊查询优化为右匹配）、调整查询策略（合并串行调用为并行、移除冗余分页操作、按需查询字段）等手段，将核心慢查询（getTransferList/getTerminationCnt）性能提升 10 倍以上，FAQ 接口响应耗时从 500ms + 降至 250ms 内，大幅提升业务查询效率。



技术要点:
・**入职流程数字化转型**：负责入职模块的业务流程优化与功能迭代，通过定义核心状态节点实现入职流程的标准化管控；集成e签宝电子签署平台实现实名认证、合同生成、签署流程创建的全链路自动化，集成OCR识别服务支持身份证、银行卡等证件的智能识别。 批量入职操作涉及大量数据校验和外部接口调用，设计批量操作的维度一致性校验算法，并采用Redisson分布式锁防止并发操作冲突。

・**本周关注数据分析平台**：设计并实现了基于策略模式+工厂模式的HR本周关注系统，支持延长工时、员工生日、入职周年、考勤异常等10种业务场景的统一数据处理。通过策略接口封装不同业务类型的处理逻辑，使系统具备强扩展性，新增业务类型只需添加策略实现类无需修改现有代码；实现多层级组织架构的递归数据处理，并通过智能排序算法和容错机制确保数据处理的准确性和系统稳定性。

・**数据导入导出引擎**：开发了异步分批次Excel导出引擎，使用CompletableFuture和ThreadPoolTaskExecutor实现非阻塞导出，支持百万级大数据量分页查询，避免内存溢出，自动分Sheet处理超大文件。同时优化Excel导入模板架构，将sheet页静态数据转换为动态下拉框组件，通过集成数据库查询和字典服务实现数据的实时动态加载，提升数据导入准确性和用户操作体验。

・**HR员服智能助手**：主导构建了基于 Dify 的 AI 智能体核心系统，建立了涵盖补签、加班、请假、薪资咨询、制度查询等 17 类 HR 业务场景的完整意图分类体系。通过多轮对话中的意图识别与上下文感知机制，实现了对复杂用户请求的精准理解与高效处理。该助手将 HR 业务处理效率整体提升约 60%，大幅降低人工操作复杂度，有效优化了员工服务体验与管理效能。

・**系统性能优化**：针对团队异动明细、FAQ 答案详情等核心查询场景开展深度性能优化，通过重构索引、优化 SQL 写法、调整查询策略等手段，将核心慢查询性能提升 10 倍以上，FAQ 接口响应耗时从 1100ms + 降至 250ms 内，大幅提升业务查询效率。